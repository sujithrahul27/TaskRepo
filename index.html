<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://live.zwidgets.com/js-sdk/1.2/ZohoEmbededAppSDK.min.js"></script>
	<title>Internal hosting</title>
	
	<style>
        table {
    width: 100%; /* Makes the table use the full width */
    border-collapse: collapse; /* Merges cell borders for a cleaner look */
}

/* Apply the border to the header and data cells */
th, td {
    border: 1px solid black; /* A 1px solid black border */
    padding: 8px; /* Adds some space inside the cells */
    text-align: left; /* Aligns text to the left */
}
    </style>
</head>
<body>
	<h1>Example of internal hosting</h1>
	<h2 id="result">Result : </h2>
	<h2 id="err">Error : </h2>
    <h2>Github Rendered</h2>
    <table>
            <thead>
             <tr>
                <th>Key</th>
                <th>Value</th>
             </tr>
            </thead>
            
            <tbody id="table-body">

            </tbody>
        
    </table>
</body>
<script>
	console.log("before try block inital load");
	
        console.log("try block is running");
		ZOHO.embeddedApp.on("PageLoad",function(data){
			document.getElementById("result").innerText += "Loaded Succcesfully";
			console.log("page load works correct");
			console.log(data);
			ZOHO.CRM.API.getRecord({Entity:data.Entity,RecordID:data.EntityId})
			.then(function(response){
				console.log(response.data[0]);
				var contact = response.data[0];
                var tableBody = document.getElementById("table-body");
                for(const [key, value] of Object.entries(contact)) {
                    console.log("key : "+key);
                    console.log("value : "+value);
                    var row = document.createElement("tr");
                    var keyCell = document.createElement("td");
                    keyCell.textContent = key;
                    var valueCell = document.createElement("td");
                    valueCell.textContent = value;

                    row.append(keyCell);
                    row.append(valueCell);
                    tableBody.append(row);
                }
                

			}).catch(function(error){
				document.getElementById("err").innerText += error
			});
			console.log("promise has been skipped or neglecated");
		})
        console.log("no errors till init");
	ZOHO.embeddedApp.init();
		//console.log("try block executed sucesfull");
	

	
		//onsole.log("error has been ooccured");
	
	
	console.log("programm executed sucessfully");

</script>
</html>
